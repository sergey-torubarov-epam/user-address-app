<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/main}">
<head>
    <title>Order Details</title>
</head>
<body>
<section layout:fragment="content">
    <h1>Order Details</h1>

    <div th:if="${order != null}">
        <dl class="row">
            <dt class="col-sm-3">Order ID</dt>
            <dd class="col-sm-9" th:text="${order.id}"></dd>

            <dt class="col-sm-3">User</dt>
            <dd class="col-sm-9" th:text="${order.user?.name ?: 'N/A'}"></dd>

            <dt class="col-sm-3">Order Date</dt>
            <dd class="col-sm-9" th:text="${#temporals.format(order.orderDate, 'yyyy-MM-dd')}"></dd>

            <dt class="col-sm-3">Status</dt>
            <dd class="col-sm-9" th:text="${order.status}"></dd>

            <dt class="col-sm-3">Shipping Date</dt>
            <dd class="col-sm-9" th:text="${order.shippingDate != null ? #temporals.format(order.shippingDate, 'yyyy-MM-dd') : 'N/A'}"></dd>

            <dt class="col-sm-3">Product Description</dt>
            <dd class="col-sm-9" th:text="${order.productDescription}"></dd>

            <dt class="col-sm-3">Quantity</dt>
            <dd class="col-sm-9" th:text="${order.quantity}"></dd>

             <dt class="col-sm-3">Price (per item)</dt>
            <dd class="col-sm-9" th:text="${#numbers.formatDecimal(order.price, 1, 'COMMA', 2, 'POINT')}"></dd>

             <dt class="col-sm-3">Total Price</dt>
            <dd class="col-sm-9" th:text="${#numbers.formatDecimal(order.price * order.quantity, 1, 'COMMA', 2, 'POINT')}"></dd>

             <dt class="col-sm-3">Created At</dt>
            <dd class="col-sm-9" th:text="${order.createdAt != null ? #temporals.format(order.createdAt, 'yyyy-MM-dd HH:mm:ss') : 'N/A'}"></dd>

             <dt class="col-sm-3">Last Updated At</dt>
            <dd class="col-sm-9" th:text="${order.updatedAt != null ? #temporals.format(order.updatedAt, 'yyyy-MM-dd HH:mm:ss') : 'N/A'}"></dd>
        </dl>

        <a th:href="@{/orders/edit/{id}(id=${order.id})}" class="btn btn-warning">Edit</a>
        <a th:href="@{/orders}" class="btn btn-secondary">Back to List</a>
         <!-- Delete Form -->
         <form th:action="@{/orders/delete/{id}(id=${order.id})}" method="post" style="display: inline; margin-left: 5px;" onsubmit="return confirm('Are you sure you want to delete this order?');">
             <button type="submit" class="btn btn-danger">Delete</button>
         </form>
    </div>
     <div th:if="${order == null}">
        <p>Order details not available.</p>
         <a th:href="@{/orders}" class="btn btn-secondary">Back to List</a>
    </div>

</section>
</body>
</html>